from llm_processor.gemini_pro_service import GeminiService

def main():
    # Создаем экземпляр сервиса
    gemini = GeminiService(240)

    # Системный запрос
    system_prompt = (
        "You are tasked with improving a Russian text that has been machine-translated. The text may contain errors, awkward phrasing, or unnatural language due to the machine translation process. Your goal is to refine and polish the text to make it sound more natural and fluent in Russian."
        "Please follow these steps to improve the text:"
        "1. Read through the entire text carefully to understand the context and content."
        "2. Identify and correct any grammatical errors, including issues with case endings, verb aspects, or agreement between words."
        "3. Improve the sentence structure where necessary to make it more natural in Russian. This may involve reordering words or breaking long sentences into shorter ones."
        "4. Replace any awkward or unnatural phrases with more idiomatic Russian expressions."
        "5. Ensure that the vocabulary used is appropriate and accurate for the context. If you encounter any words that seem out of place or incorrectly used, replace them with more suitable alternatives."
        "6. Pay attention to the proper use of Russian punctuation, including the correct placement of commas, dashes, and quotation marks according to Russian punctuation rules."
        "7. Maintain the original meaning and tone of the text while making it sound more fluent and native-like."
        "8. Be cautious not to introduce elements of other languages or cultures that wouldn't be natural in a Russian text."
        "9. Preserve HTML and EPUB markup"
        "After making these improvements, provide only the corrected version of the text." 
        "Remember to maintain the integrity of the Russian language throughout the process. Do not translate the text into other languages, add explanations, or output technical information. The goal is to get a polished, natural-sounding Russian text that reads as if it was originally written by a native Russian speaker."
    )

    # Пользовательский запрос
    user_prompt = (
        "Here is the Russian text that needs improvement:"
        """<h2></h2><p style="text-align: center;"><span style="color: #428BCA;"><em data-rich-text-format-boundary="true"></em></span></p><p>3 Глава 3 : Крепкий Е Чен</p><p>Выйдя из комнаты, Е Чен огляделся вокруг и увидел, что это небольшой сад радиусом всего 2 фута. Также там был духовный плод дерево, посаженное в центре небольшого сада. </p><p>Кроме мальчика по имени Хува, в саду есть только один старик. </p><p>Вокруг небольшого каменного стола сидели трое, а рядом с ним на корточках сидела огромная птица, жадно рассматривая еду на столе, которая используется монахом в качестве транспорта. </p><p>После разговора с Е Ченом он узнал, что старика, спасшего его прошлой ночью, звали Чжан Фэннянь. Из-за его ошибок его уровень совершенствования был отменен, и он был понижен в должности из секты, так что место, где он жил, было почти у подножия горы Хэнюэ Цзунлин. </p><p>«Вот тебе маленький орел.» Хува бросил кусок бекона в миску, которую ему не хотелось есть, гигантской птице, и сказал, что он не забыл прикоснуться к большой птице своим маленькая рука Глядя на положение головы, он считал гигантскую птицу родственницей. </p><p>Здесь Чжан Фэннянь посмотрел на Е Чэня с нежной улыбкой:»Молодой человек, вы тоже монах!» </p><p> Е Чэнь, который поглощал пищу и набивал рот, услышал Вопрос Чжан Фэннянь Поспешно поставил миску и палочки для еды и кивнул с улыбкой. </p><p>«Тогда к какой секте ты принадлежишь.»</p><p>«Старик, у меня нет семьи или секты, просто случайный земледелец.»</p><p>«Жаль.»Чжан Фэннянь тихо вздохнул:»Вы должны найти секту совершенствования в расцвете сил. В конце концов, у секты есть необходимые вам ресурсы для совершенствования, и вам не нужно достигать 1-го уровня конденсации ци в таком возрасте..</p><p>«То, что сказал старший, правда.»Е Чэнь снова улыбнулся и скрыл свое прошлое. Конечно, он может практиковать снова, и он определенно снова найдет практикующую секту. просто ресурсы совершенствования Это действительно проблема, но быть учеником секты — это другое. По крайней мере, есть секты, которые могут полагаться на ресурсы совершенствования и иметь определенную гарантию.</p><p>Видеть, как Е Чен думает о Чжан Фэнняне и добродушно улыбаясь:»Молодые люди заинтересованы в том, чтобы быть постоянными?» Ученик Юэ Цзуна..</p><p>«Конечно интересно.»Е Чэнь поспешно рассмеялся. </p><p> Он также подумал в своем сердце, что Хэнюэцзун не слаб. Выбирайте.</p><p>Можно сказать, что в это время в Чжэнъянцзуне он полон энергии. лидер. Он твердо верит, что с помощью настоящего огня Hengyuezong определенно будет сиять в ближайшем будущем.</p><p>«Порог старшего Heng Yuezong не низок! Е Чэнь посмотрел на Чжан Фэнняня и спросил. </p><p>«Все в порядке, если я напишу рекомендательное письмо, я считаю, что это нормально, если вы будете стажером.»</p><p>Рекомендательное письмо?</p><p>Услышав эти четыре слова, Е Чэнь не мог не взглянуть тайком на этого старика. Хотя он не может совершенствоваться и бесполезен, это не так просто как кажется на первый взгляд.</p><p class="text-primary">!</p><p>Бац!</p><p>В этот момент дверь Маленького Линъюаня распахнулась, и вошел молодой человек в белом.</p><p>«Эй! Как насчет еды?»Молодой человек в белом оскорбительно улыбнулся. </p><p>«Чжан Тао, что ты делаешь.»Хува немедленно встал и сердито посмотрел на мальчика в белом, и выражение лица Чжан Фэнняня тут же помрачнело, даже гигантская птица рядом с ним безостановочно каркала, расправляя свои большие крылья, чтобы защитить Хува в одиночку. </p><p> Е Чэнь взглянул на Чжан Тао и увидел, что он ученик Хэнъюэ, потому что на даосском одеянии было слово Хэнъюэ, и он мог с первого взгляда увидеть сквозь него, что совершенствование Тао достигло уровня Главы 2. </p><p>Хмпх.</p><p>Чжан Тао холодно фыркнул и свирепо посмотрел на Чжан Фэнняня:»Поторопитесь и отдайте старые вещи, или не обвиняйте меня в грубости..</p><p>«У меня нет того, что вы хотите.»Сделав глубокий вдох, старое лицо Чжан Фэнняня мгновенно побледнело. </p><p>«Стыд на лице.»Внезапно яростно закричав, Чжан Тао пнул стол одной ногой, выглядя яростно, как грабитель, слизывающий кровь кончиком ножа.</p><p>Вау! квакать! </p><p>Гигантская птица рядом с 1 уже промчалась с трепещущими крыльями. Хотя это духовный зверь низкого уровня, у него высокий уровень интеллекта. Выражение кого-то в больших глазах-гнев. </p><p>«В поисках смерти.» Глаза Чжан Тао сияют, и между его ладонями и пальцами задерживается истинная энергия, которая мгновенно конденсируется в воздушный клинок и мгновенно оставляет кровавое русло на теле Большой Птицы. </p><p>Большая Птица брызнула кровью наповал. </p><p>«Маленький орел.» Хува набросился на него. </p><p>Вау! квакать! </p><p>Большая птица слабо закричала, но все же использовала свои большие крылья, чтобы защитить тигренка. </p><p>«Ты негодяй.» Указывая на Чжан Тао дрожащими пальцами, Чжан Фэннянь в спешке чуть не упал. </p><p>«Отдай это, или не обвиняй меня в жестокости…» Чжан Тао сделал шаг ближе, но прежде чем он успел произнести слово»острый», Е Чэнь, который был рядом с ним, ударил его по голове и закрыл лицо пощечиной. </p><p>Трещина! </p><p>Аплодисменты были четкими и громкими. </p><p>Прежде чем Чжан Тао был избит, прежде чем он успел среагировать, он обнаружил, что Е Чэнь жестоко дернул его за руку, его тело на мгновение потеряло равновесие, а затем он был отделен от своего лица, и его все тело было подброшено в воздух. </p><p>Бац! </p><p>С громким хлопком Чжан Тао, который вел себя властно в последний момент, был отброшен Е Чэнем на его застывшее лицо и превратился в человеческую форму.</p><p>Пуф! </p><p>Полный рот крови брызнул, Чжан Тао был брошен Е Ченом, и все его внутренние органы были перемещены. </p><p>Глядя на Чжан Фэнняня в этой сцене, он был ошеломлен. 1 Хува рядом с ним не мог не проглотить слюну, когда увидел такого крепкого Е Чэня. </p><p>Это правда, что Е Чен совершил внезапную атаку, но его сила слишком велика, чтобы быть страшной. </p><p>Просто они не знали, что тело Е Чена было Дан Хай. </p><p>Если вы боретесь за совершенствование истинной ци, тот же уровень Уровня Конденсации Ци 1, количество Истинной Ци в Данхае Е Чэня в три раза больше, чем у них, поэтому база совершенствования Е Чэня находится на 1-м уровне Конденсация Ци, но она сравнима с обычной Конденсацией Ци 3 тяжелой. </p><p>«Люди делают что-то и смотрят в небо, чтобы накопить какую-то добродетель для себя.»</p><p>Когда Е Чен кричал и был избит, Е Чен выбросил окровавленного Чжан Тао. Небольшое кладбище. </p><p>Ночью Е Чэнь послал маленькому орленку истинную энергию, которая спасла его жизнь, но долгое время после этого этой верной гигантской птице и духовному зверю было трудно летать в воздухе..</p><p>«Мой друг, большое спасибо сегодня.» Сидя на каменных ступенях, Чжан Фэннянь выглядел очень старым, и быть убитым его учеником было чрезвычайно болезненно для такого доброго старика, как он. </p><p>«Старший, это просто вопрос поднятия рук.» Е Чен небрежно улыбнулся.</p><p>Увы! </p><p>Только услышав мрачный вздох Чжан Фэнняня, его затуманенные старые глаза были полны ностальгии, как будто он вспомнил печальное прошлое:»Раньше я был старейшиной секты Хэнюэ, но меня отправили в это маленькое место, потому что Я совершил большую ошибку. Кладбище и то, что Чжан Тао — мой бывший ученик. Во всем виноват я, потому что я не могу хорошо учить». </p><p>«Мастер должен вести дверь к практике». Е Чэнь утешил:»Старший, не вини себя. Это он. Это все о его природе». </p><p>«Он просто хочет Проклятие Небесного Духа дедушки». Хува рядом с ним сердито сжал свои маленькие кулачки,» Он украл все, что дедушка копил все эти годы. Приходит и издевается над нами каждый день.»</p><p>Проклятие небесного духа? </p><p>Е Чен не чужд имени Хэнъюэ Сун, у него есть своего рода талисман, называемый Мантрой Небесного Духа, когда он прикреплен к человеку, он на короткое время запечатывает истинную энергию человека. Давно есть 3 известных случая. </p><p>Этот вид очарования чрезвычайно ценен. Никогда не ходили слухи, что Е Чэнь никогда не думал, что у этого Фэнняна будет такое очарование. </p><p>«Я уже написал рекомендательное письмо, маленький друг, и завтра я пойду в горы, чтобы потренироваться! Твой талант не низок, так что не закапывай его.» Когда Е Чэнь подумал, Чжан Фэннянь уже отправил письмо, и досье сунуло его в руку Е Чэня:»Есть также этот файл, чтобы представить Хэн Юэ. Можно взглянуть». </p><p>«Спасибо, старший.»&lt;стр.64&gt;</p><h3></h3><p><br/></p><br/>"""
    )

    # Отправляем запрос
    response = gemini.process_text(
        system_prompt=system_prompt,
        user_prompt=user_prompt,
        temperature=0.0,
        max_output_tokens=8000,
    )

    if response:
        print("Ответ от Gemini через прокси:")
        print(response)
    else:
        print("Gemini API не вернул ответа.")

if __name__ == "__main__":
    main()
